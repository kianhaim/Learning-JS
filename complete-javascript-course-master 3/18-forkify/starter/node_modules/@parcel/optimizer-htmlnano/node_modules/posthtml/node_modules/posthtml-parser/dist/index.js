"use strict";Object.defineProperty(exports, "__esModule", {value: true});var _chunkT6SARJYHjs = require('./chunk.T6SARJYH.js');var _htmlparser2 = require('htmlparser2');var j={lowerCaseTags:!1,lowerCaseAttributeNames:!1,decodeEntities:!1},v=[{name:"!doctype",start:"<",end:">"}],O= exports.parser =(u,a={})=>{let d=new (0, _chunkT6SARJYHjs.a)(u),r=[],i=[];function c(){return r[r.length-1]}function l(e,t){return e.name instanceof RegExp?new RegExp(e.name.source,"i").test(t):t===e.name}function y(e){let t={};return Object.keys(e).forEach(n=>{let o={};o[n]=String(e[n]).replace(/&quot;/g,'"'),Object.assign(t,o)}),t}function b(e,t){var p;let n=v.concat((p=a.directives)!=null?p:[]),o=c();for(let f of n){let g=f.start+t+f.end;if(l(f,e.toLowerCase())){if(o===void 0){i.push(g);return}typeof o=="object"&&(o.content===void 0&&(o.content=[]),Array.isArray(o.content)&&o.content.push(g))}}}function A(e){let t=c(),n=`<!--${e}-->`;if(t===void 0){i.push(n);return}typeof t=="object"&&(t.content===void 0&&(t.content=[]),Array.isArray(t.content)&&t.content.push(n))}function x(e,t){let n=d.getPosition(s.startIndex),o={tag:e};a.sourceLocations&&(o.location={start:n,end:n}),Object.keys(t).length>0&&(o.attrs=y(t)),r.push(o)}function h(){let e=r.pop();if(e&&typeof e=="object"&&e.location&&s.endIndex!==null&&(e.location.end=d.getPosition(s.endIndex)),e){let t=c();if(r.length<=0){i.push(e);return}typeof t=="object"&&(t.content===void 0&&(t.content=[]),Array.isArray(t.content)&&t.content.push(e))}}function m(e){let t=c();if(t===void 0){i.push(e);return}if(typeof t=="object"){if(t.content&&Array.isArray(t.content)&&t.content.length>0){let n=t.content[t.content.length-1];if(typeof n=="string"&&!n.startsWith("<!--")){t.content[t.content.length-1]=`${n}${e}`;return}}t.content===void 0&&(t.content=[]),Array.isArray(t.content)&&t.content.push(e)}}let s=new (0, _htmlparser2.Parser)({onprocessinginstruction:b,oncomment:A,onopentag:x,onclosetag:h,ontext:m},{...j,...a});return s.write(u),s.end(),i};exports.parser = O;
